<?xml version="1.0" encoding="iso-8859-1"?>
<!-- EN-Revision: 1.118 Maintainer: ae Status: ready -->
 <chapter xml:id="configuration" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Configuração</title>

  <sect1 xml:id="configuration.file">
   <title>O arquivo de configuração</title>

   <simpara>
    O arquivo de configuração (chamado <filename>php3.ini</filename> no
    PHP 3, e simplesmente &php.ini; no PHP 4)
    é lido quando o PHP inicia. Para as versões de módulos de servidor do PHP,
    isso só acontece uma vez quando o servidor é iniciado. Para as versões
    <acronym>CGI</acronym> e <acronym>CLI</acronym> acontece em
    cada execução.
   </simpara>
   <para>
    A localização padrão do &php.ini; é uma opção de compilação (veja a <link
    linkend="faq.installation.phpini">FAQ</link> correspondente), mas pode ser modificada
    para as versões <acronym>CGI</acronym> e <acronym>CLI</acronym> com o opcional
    <literal>-c</literal>. Veja isso no capítulo sobre utilizando o
    PHP a partir da <link
    linkend="features.commandline">linha de comando</link>). Você também pode utilizar a
    variável ambiente <literal>PHPRC</literal> para colocar caminhos adicionais
    para a procura do arquivo &php.ini;.
   </para>
   <note>
    <para>
     O servidor web Apache muda o diretório root na inicialização fazendo com que
     o PHP tente ler o &php.ini; a partir da raiz do sistema de arquivos, se existir.
    </para>
   </note>
   <para>
    As diretivas do &php.ini; utilizadas por extensões são documentadas nas
    respectivas páginas das extensões. A <link linkend="ini">lista de 
    diretivas principais</link> está disponível no apêndice. Provavelmente nem
    todas as diretivas do PHP estão documentadas ainda no manual. Para uma lista completa
    das diretivas disponíveis para sua versão do PHP, verifique o (muito bem comentado)
    &php.ini;. Alternativamente, você pode ler o
    <link xlink:href="&url.php.cvs.phpini;">última versão do &php.ini;</link> disponível no CVS
    .
   </para>
      <para>
    <example>
     <title>&php.ini; example</title>
     <programlisting role="ini">
<![CDATA[
; qualquer texto depois de um ponto e vírgula não delimitado (;) é ignorado
[php] ; marcadores de seção (texto entre colchetes) também são ignorados
; Valores booleanos podem ser:
;    true, on, yes
; ou false, off, no, none
register_globals = off
track_errors = yes

; você pode delimitar strings com aspas
include_path = ".:/usr/local/lib/php"

; barras invertidas são tratadas da mesma maneira que outros caracteres
include_path = ".;c:\php\lib"
]]>
</programlisting>
<!-- TODO: add more details about values and expressions -->
    </example>
   </para>
  </sect1>

  <sect1 xml:id="configuration.changes">
   <title>Como alterar as configurações definidas</title>

   <sect2 xml:id="configuration.changes.apache">
    <title>Rodando o PHP como módulo do Apache</title>
    <simpara>
     Quando usando o PHP como um módulo do Apache, você também pode mudar
     as definições de configuração usando diretivas na configuração do
     Apache (&httpd.conf;) e &htaccess; . Você irá precisá de privilégios
     "AllowOverride Options" ou "AllowOverride All" nesses casos.
    </simpara>

    <para>
     Com o PHP 4 e PHP 5, existem várias diretivas do Apache que lhe permitem
     mudar a configuração PHP diretamente a partir dos arquivos de configuração
     do Apache. Para uma lista das diretivas que podem ser alteradas, veja aquelas marcadas com
     <constant>PHP_INI_ALL</constant>, <constant>PHP_INI_PERDIR</constant>,
     ou <constant>PHP_INI_SYSTEM</constant>, relacionadas na documentação
     da função <function>ini_set</function>.
    </para>

    <note>
     <simpara>
      Com o PHP 3, existem diretivas Apache que correspondem a cada
      definição de configuração do <filename>php3.ini</filename>,
      exceto os nomes prefixados por "php3_".
     </simpara>
    </note>

    <para>
     <variablelist>
      <varlistentry>
       <term>
        <systemitem role="directive">php_value</constant>
        <parameter>nome</parameter>
        <parameter>valor</parameter>
       </term>
       <listitem>
        <para>
         Define o valor da variável especificada.
         Pode ser utilizada somente com diretivas do tipo <constant>PHP_INI_ALL</constant> e <constant>PHP_INI_PERDIR</constant>.
         Para limpar um valor configurado anteriormente, utilize <literal>none</literal> como parâmetro.
        </para>
        <note>
         <simpara>
          Não utilize <systemitem role="directive">php_value</constant> para configurar valores booleandos.
          Em vez disso, use <systemitem role="directive">php_flag</constant> (veja abaixo).
         </simpara>
        </note>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        <systemitem role="directive">php_flag</constant>
        <parameter>nome</parameter>
        <parameter>on|off</parameter>
       </term>
       <listitem>
        <para>
         Isto é usado para definir uma opção de configuração Booleana.
         Somente pode ser utilizada em diretivas do tipo <constant>PHP_INI_ALL</constant> e 
         <constant>PHP_INI_PERDIR</constant>.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        <systemitem role="directive">php_admin_value</constant>
        <parameter>nome</parameter>
        <parameter>valor</parameter>
       </term>
       <listitem>
        <para>
         Define o valor da variável especificada.
         Isto <emphasis>não</emphasis> pode ser utilizado em arquivos &htaccess;.
         Qualquer tipo de diretiva modificada com <systemitem role="directive">php_admin_value</constant>
         não pode ser sobrescrita por arquivos &htaccess; ou diretivas virtualhost.
         Para limpar um valor configurado antetiormente, utilize <literal>none</literal> como parâmetro.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        <systemitem role="directive">php_admin_flag</constant>
        <parameter>nome</parameter>
        <parameter>on|off</parameter>
       </term>
       <listitem>
        <para>
         Utilizado para definir uma opção de configuração Booleana.
         Isto NÃO pode ser utilizado em arquivos &htaccess;.
         Qualquer diretiva configurada com <systemitem role="directive">php_admin_flag</constant>
         não pode ser sobrescrita por arquivos &htaccess; ou diretivas virtualhost.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </para>
    <para>
     <example>
      <title>Exemplo de configuração do Apache</title>
      <programlisting role="ini">
<![CDATA[
<IfModule mod_php5.c>
  php_value include_path ".:/usr/local/lib/php"
  php_admin_flag safe_mode on
</IfModule>
<IfModule mod_php4.c>
  php_value include_path ".:/usr/local/lib/php"
  php_admin_flag safe_mode on
</IfModule>
<IfModule mod_php3.c>
  php3_include_path ".:/usr/local/lib/php"
  php3_safe_mode on
</IfModule>
]]>
      </programlisting>
     </example>
    </para>
    <caution>
     <para>
      Constantes PHP não existem fora do PHP. Por exemplo, no
      &httpd.conf; não pode utilizar constantes PHP
      como <constant>E_ALL</constant> ou <constant>E_NOTICE</constant>
      para configurar a diretiva <link linkend="ini.error-reporting">error_reporting</link>,
      pois elas não tem nenhum sentido e serão avaliados como
      <emphasis>0</emphasis>. Nesses casos, utilize seus valores de bit.
      Essas constantes só podem ser utilizadas dentro do &php.ini;
     </para>
    </caution>
   </sect2>

   <sect2 xml:id="configuration.changes.windows">
    <title>Modificando a configuração do PHP via registro</title>
     <simpara>
      Quando rodando o PHP no Windows, os valores de configuração podem ser
      modificados diretório a diretório utilizando o registro do Windows. Os
      valores de configuração são armazenados na chave do registro
      <literal>HKLM\SOFTWARE\PHP\Per Directory Values</literal>,
      onde as sub chaves correspondem aos caminhos. Por exemplo, valores de
      configuração para o diretório <literal>c:\inetpub\wwwroot</literal> devem
      ser armazenados na chave <literal>HKLM\SOFTWARE\PHP\Per Directory
      Values\c\inetpub\wwwroot</literal>. As configurações para o
      diretório são ativadas para qualquer script rodando neste
      diretório ou qualquer subdiretório dele. Os valores sob a chave
      devem ter o nome das diretivas de configuração do PHP e um 
      valor string. As constantes do PHP nos campos não são interpretados.
     </simpara>
   </sect2>

   <sect2 xml:id="configuration.changes.other">
    <title>Outras interfaces para o PHP</title>
    <para>
     Independentemente de como você roda o PHP, você pode mudar certos valores enquanto
     rodando seus scripts através de <function>ini_set</function>. Veja a documentação
     da função <function>ini_set</function> para mais detalhes.
    </para>
    <para>
     Se você está interessado na lista completa das diretivas de configuração
     de seu sistema com os valores atuais, você pode executar a função
     <function>phpinfo</function> e ver a relação na página
     resultante. Você também pode acessar os valores de cada diretiva
     individualmente através de <function>ini_get</function> ou
     <function>get_cfg_var</function>.
    </para>
   </sect2>
  </sect1>

 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
