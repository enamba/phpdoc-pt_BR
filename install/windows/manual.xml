<?xml version="1.0" encoding="iso-8859-1"?>
<!-- EN-Revision: 1.18 Maintainer: narigone Status: ready -->
   <sect1 id="install.windows.manual">
    <title>Passos da Instalação Manual</title>

    <para>
     Esse guia de instalação ajudará você a instalar manualmente e configurar o PHP com
     um servidor web no Microsoft Windows. Para começar, você precisará baixar
     o zip com a distribuição binária da página de downloads em
     <ulink url="&url.php.downloads;">&url.php.downloads;</ulink>.
    </para>

    <para>
     Embora existam muitos kits de instalação "completos", e nós também
     distribuímos um instalador do PHP para o Microsoft Windows, nós recomendamos
     que você se dê ao trabalho de instalar o PHP manualmente uma vez que isso lhe permitirá
     um melhor entendimento do sistema, e permite que você instale extensões do PHP
     facilmente quando precisar.
    </para>

    <note id="install.windows.manual.upgrade">
     <title>Atualizar uma versão instalado do PHP</title>
     <para>
      Edições anteriores do manual sugeriam mover vários arquivo ini e
      <acronym>DLL</acronym> para o seu diretório SYSTEM (ex.:
      <filename class="directory">C:\WINDOWS</filename>) e, embora isso
      simplifique o processo de instalação, torna a atualização difícil. Nós
      aconselhamos que você remova esses arquivos (como &php.ini; e DLLs relacionadas
      ao PHP da pasta SYSTEM do Windows) antes de continuar com uma
      instalação nova do PHP. Assegure-se de fazer um backup desses arquivos já que você pode
      corromper o sistema inteiro. O arquivo &php.ini; da versão anterior a que você quer instalar
      pode ser útil na versão nova. E, como você aprenderá a seguir, o método preferido para
      instalar o PHP é manter todos os arquivos relacionados ao PHP em um diretório e
      disponibilizar esse diretório no PATH do seu sistema.
     </para>
    </note>

    <note>
     <title>Requerimentos MDAC</title>
     <para>
      Se você usa o Microsoft <emphasis>Windows 98/NT4</emphasis>, baixe a
      última versão do Microsoft Data Access Components (MDAC) para sua
      plataforma. MDAC está disponível em <ulink url="&url.mdac;">&url.mdac;</ulink>.
      Esse requerimento existe porque <link linkend="ref.uodbc">ODBC</link> é
      compilado nos binários distribuídos para o Windows.
     </para>
    </note>

    <para>
     Os passos a seguite devem ser completados em todas as instalações antes de qualquer
     instruções específicas ao servidor sejam feitas:
    </para>
    <para>
     Extraia o arquivo da distribuição no diretório de sua escolha. Se você
     estiver instalando o PHP 4, extraia em  <filename
      class="directory">C:\</filename>, uma vez que o arquivo zip expande para uma
     pasta de nome parecido com <filename>php-4.3.7-Win32</filename>. Se você estiver
     instalando o PHP 5, extraia em <filename
      class="directory">C:\php</filename> já que o arquivo zip não expande como no
     PHP 4. Você pode escolher uma localização diferente, desde que não tenha espaços no
     caminho (como <filename class="directory">C:\Program Files\PHP</filename>)
     já que alguns servidores web irão travar se tiver.
    </para>
    <para>
     A estrutura de diretório extraida do zip é diferente para as versões
     4 e 5 e se parecem com as seguintes:
    </para>
    <example>
     <title>Estrutura de diretório para o PHP 4</title>
     <programlisting>
<![CDATA[

c:\php
   |
   +--cli
   |  |
   |  |-php.exe           -- executável CLI - Só para uso na linha de comando.
   |
   +--dlls                -- DLLs de suporte, necessárias para algumas extensões
   |  |
   |  |-expat.dll
   |  |
   |  |-fdftk.dll
   |  |
   |  |-...
   |
   +--extensions          -- DLLs de extensões para o PHP
   |  |
   |  |-php_bz2.dll
   |  |
   |  |-php_cpdf.dll
   |  |
   |  |-..
   |
   +--mibs                -- arquivos de suporte para SNMP
   |
   +--openssl             -- arquivos de suporte para Openssl
   |
   +--pdf-related         -- arquivos de suporte para PDF
   |
   +--sapi                -- DLLs de SAPI (suporte a módulo de servidor)
   |  |
   |  |-php4apache.dll
   |  |
   |  |-php4apache2.dll
   |  |
   |  |-..
   |
   +--PEAR                -- cópia inicial do PEAR
   |
   |
   |-go-pear.bat          -- script de configuração do PEAR
   |
   |-..
   |
   |-php.exe              -- executável CGI
   |
   |-..
   |
   |-php.ini-dist         -- configurações padrão do php.ini
   |
   |-php.ini-recommended  -- configurações recomendadas do php.ini
   |
   |-php4ts.dll           -- DLL núcleo do PHP
   |
   |-...

]]>
     </programlisting>
    </example>
    <para>
    Ou:
    </para>
    <example>
     <title>Estrutura de diretório para o PHP 5</title>
     <programlisting>
<![CDATA[

c:\php
   |
   +--dev
   |  |
   |  |-php5ts.lib
   |
   +--ext                 -- DLLs de extensões para o PHP
   |  |
   |  |-php_bz2.dll
   |  |
   |  |-php_cpdf.dll
   |  |
   |  |-..
   |
   +--extras
   |  |
   |  +--mibs             -- arquivos de suporte para SNMP
   |  |
   |  +--openssl          -- arquivos de suporte para Openssl
   |  |
   |  +--pdf-related      -- arquivos de suporte para PDF
   |  |
   |  |-mime.magic
   |
   +--pear                -- cópia inicial do PEAR
   |
   |
   |-go-pear.bat          -- script de configuração do PEAR
   |
   |-fdftk.dll
   |
   |-..
   |
   |-php-cgi.exe          -- executável CGI
   |
   |-php-win.exe          -- executa scripts sem um prompt de comando aberto
   |
   |-php.exe              -- CLI executável - Só para uso em linha de comando
   |
   |-..
   |
   |-php.ini-dist         -- configurações padrão do php.ini
   |
   |-php.ini-recommended  -- configurações recomendadas do php.ini
   |
   |-php5activescript.dll
   |
   |-php5apache.dll
   |
   |-php5apache2.dll
   |
   |-..
   |
   |-php5ts.dll           -- DLL núcleo do PHP
   |
   |-...

]]>
     </programlisting>
    </example>
    <para>
     Note as diferenças e similaridades. Tanto o PHP 4 quanto o 5 tem um
     executável <acronym>CGI</acronym>, um executável <acronym>CLI</acronym>,
     e módulos do servidor, mas eles estão localizados em pastas diferentes e/ou tem
     nomes diferentes. Enquanto no PHP 4 os módulos do servidor estão na pasta
     <filename class="directory">sapi</filename>, no PHP 5
     não há tal diretório e, ao invés disso, eles estão na pasta principal
     do PHP. As DLLs de suporte para as extensões do PHP 5 também não estão
     em um diretório separado.
    </para>
    <note>
     <para>
      No PHP 4, você deve mover todos os arquivos localizados nas pastas <filename
       class="directory">dll</filename> e <filename
       class="directory">sapi</filename> para a pasta principal (ex.:
      <filename class="directory">C:\php</filename>).
     </para>
    </note>
    <para>
     Aqui está uma lista dos módulos de servidor liberados com o PHP 4 e PHP 5:
     <itemizedlist>
      <listitem><para>
       <filename>sapi/php4activescript.dll (php5activescript.dll)</filename>
       - <link linkend="install.windows.activescript">ActiveScript
       engine</link>, permitindo imbutir PHP em aplicações
       Windows.
      </para></listitem>
      <listitem><para>
       <filename>sapi/php4apache.dll (php5apache.dll)</filename> - Módulo do Apache 1.3.x.
      </para></listitem>
      <listitem><para>
       <filename>sapi/php4apache2.dll (php5apache2.dll)</filename> - Módulo do Apache 2.0.x.
      </para></listitem>
      <listitem><para>
       <filename>sapi/php4isapi.dll (php5isapi.dll)</filename> - Módulo do ISAPI
       para servidores que suportam ISAPI como IIS 4.0/PWS 4.0 ou superior.
      </para></listitem>
      <listitem><para>
       <filename>sapi/php4nsapi.dll (php5nsapi.dll)</filename> - Módulo dos servidores
       Sun/iPlanet/Netscape.
      </para></listitem>
      <listitem><para>
       <filename>sapi/php4pi3web.dll (não tem equivalente no PHP 5)</filename> - Módulo do servidor Pi3Web.
      </para></listitem>
       <!-- TODO: servlets? -->
     </itemizedlist>
    </para>
    <para>
     Módulos de servidor tem performance significativamente melhor e funcionalidades
     adiconais comparados com o binário CGI. A versão CLI é desenhada para
     permitir usar o PHP para scripts de linha de comando. Mais informação sobre CLI
     disponível no capítulo sobre <link linkend="features.commandline">usando
     PHP da linha de comando</link>.
    </para>
    <warning>
     <simpara>
      Os módulos SAPI foram melhorados significativamente a partir do release 4.1,
      no entanto, em sistemas mais antigos, você pode encontrar erros de servidor e outros
      módulos do servidor podem falhar, como ASP.
     </simpara>
    </warning>
    <para>
     Os binários CGI e CLI, e os módulos de servidor web todos necessitam do arquivo
     <filename>php4ts.dll</filename> (<filename>php5ts.dll</filename>)
     para funcionar corretamente. Você tem que assegurar que esse arquivo pode se encontrado
     pela sua instalação do PHP. A ordem de busca para essa DLL é como segue:
     <itemizedlist>
      <listitem>
       <para>
        O mesmo diretório onde o arquivo <filename>php.exe</filename> é chamado,
        ou no caso de usar um módulo SAPI, o diretório do servidor web (ex.:
        <filename>C:\Program Files\Apache Group\Apache2\bin</filename>).
       </para>
      </listitem>
      <listitem>
       <para>
        Qualquer diretório no na sua variável de ambiente <varname>PATH</varname>
        do Windows.
       </para>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     Para disponibilizar <filename>php4ts.dll</filename> / <filename>php5ts.dll</filename>
     você tem três opções: copiar o arquivo para o diretório system do Windows,
     copiar o arquivo para o diretório do servidor web, ou adicionar o diretório
     do PHP, <filename class="directory">C:\php</filename> no
     <varname>PATH</varname>. Para melhor manutenção, nós aconselhamos que você
     siga a última opção, adicione <filename class="directory">C:\php</filename> ao
     <varname>PATH</varname>, porque é mais simples atualizar o PHP
     no futuro. Leia mais sobre como adicionar o diretório ao
     <varname>PATH</varname> no <link
      linkend="faq.installation.addtopath">FAQ correspondente</link>.
    </para>
    <para>
     O próximo passo é montar um arquivo de configuração para o PHP, &php.ini;.
     Existem dois arquivos ini distribuídos no arquivo zip,
     <filename>php.ini-dist</filename> e
     <filename>php.ini-recommended</filename>. Nós aconselhamos que você use
     <filename>php.ini-recommended</filename>, porque nós otimizamos as
     configurações padrões nesse arquivo para performance e segurança. Leia esse
     arquivo bem documentador cuidadosamente porque ele tem diferenças em relação a
     <filename>php.ini-dist</filename> que afetarão drasticamente sua
     configuração. Alguns exemplos são <link linkend="ini.display-errors">
     display_errors</link> está <literal>off</literal> e
     <link linkend="ini.magic-quotes-gpc">magic_quotes_gpc</link> está
     <literal>off</literal>. Além de ler isso, estude as <link
     linkend="configuration.file">configurações ini</link> e configure cada elemento
     manualmente. Se você quiser alcança o máximo de segurança, então
     essa é a maneira que você deve fazer, embora o PHP funcione bem com os arquivos
     padrões. Copie o seu arquivo ini preferido para um diretódio que o PHP possa encontrar
     e renomei para &php.ini;. PHP procura pelo arquivo &php.ini; nas localidades
     descritas nessa <xref linkend="configuration.file"/> seção.
    </para>
    <para>
     Se você estiver executando o Apache 2, a opção mais simples é usar a diretiva
     PHPIniDir (leia a página <link linkend="install.windows.apache2">instalação
     no Apache 2</link>). Caso contrário, sua melhor opção é criar a
     variável de ambiente <varname>PHPRC</varname>. Esse processo é explicado no
     seguinte <link linkend="faq.installation.phprc">FAQ</link>.
    </para>
    <note>
     <simpara>
      Se você estiver usando NTFS no Windows NT, 2000, XP ou 2003, assegure-se que o
      usuário executando o servidor web tem permissões de leitura ao seu arquivo &php.ini; (ex.:
      faça com que seja lido por Everyone (Todos) ).
     </simpara>
    </note>
    <para>
     Os passos a seguir são opcionais:
     <itemizedlist>
      <listitem>
       <para>
        Edite seu no arquivo &php.ini;.
        Se você planeja usar <link linkend="install.windows.omnihttpd">OmniHTTPd</link>,
        não faça o passo a seguir. Edite o
        <link linkend="ini.doc-root">doc_root</link> para apontar para o
        document_root do servidor web. Por exemplo:
        <informalexample>
          <programlisting role="ini">
<![CDATA[
doc_root = c:\inetpub\wwwroot // para IIS/PWS

doc_root = c:\apache\htdocs // para Apache
]]>
         </programlisting>
        </informalexample>
       </para>
      </listitem>
      <listitem>
       <simpara>
        Selecione as extensões que você quer que sejam carregadas quando o PHP iniciar. Veja
        a seção sobre
        <link linkend="install.windows.extensions">extensões no Windows</link>,
        sobre como configurar uma, e quais já estão integradas. Note que em
        uma instalação nova, é aconselhável primeiro fazer o PHP funcionar e testá-lo
        sem extensões e depois habilitá-las no arquivo &php.ini;.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        No PWS e IIS, você pode editar a configuração
        <link linkend="ini.browscap">browscap</link>
        para que ela aponte para:
        <filename>c:\windows\system\inetsrv\browscap.ini</filename> no
        Windows 9x/Me,
        <filename>c:\winnt\system32\inetsrv\browscap.ini</filename> no
        NT/2000, e
        <filename>c:\windows\system32\inetsrv\browscap.ini</filename>
        no XP.  Para um arquivo <filename>browscap.ini</filename> atualizado, leia o
        seguinte <link linkend="faq.obtaining.browscap">FAQ</link>.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     O PHP agora está configurado no seu sistema. O próximo passo é escolher um
     servidor web, e habilitá-lo para executar o PHP. Escolha um servidor web da
     tabela de conteúdos.
    </para>
   </sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
