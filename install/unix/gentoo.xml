<?xml version="1.0" encoding="iso-8859-1"?>
<!-- EN-Revision: 1.4 Maintainer: narigone Status: ready -->
<sect1 id="install.unix.gentoo">
 <title>Notas de Instalação para usuários do Gentoo Linux</title>
 <para>
  Essa seção contêm notas e dicas específicas para a instalação do
  PHP no <ulink url="&url.gentoo;">Gentoo Linux</ulink>.
 </para>
 <sect2 id="install.unix.gentoo.portage">
  <title>Usando o Portage (emerge)</title>
   <simpara>
    Apesar de você poder apenas baixar os fontes do PHP e compilar por conta própria,
    usar o sistema de pacotes do Gentoo é o método mais simples e mais limpo
    de instalar o PHP. Se você não está familiarizado com o processo de
    compilar software no Linux, usar o Portage é a maneira recomendada.
   </simpara>
   <simpara>
    Se você tiver montado seus sistema Gentoo até agora, você provavelmente já está
    habituado a usar o Portage. Instalar o Apache e o PHP não é diferente das
    outras ferramentas de sistema.
   </simpara>
   <simpara>
    A primeira decisão que você precisará fazer é se você quer instalar o
    Apache 1.3.x ou o Apache 2.x. Enquanto ambos podem ser usado com o PHP, os
    passos abaixo serão para o uso do Apache 1.3.x. Outra coisa a ser considerada
    é se a sua árvore local do Portage está atualizada. Se você não atualizou-a
    recentemente, você precisa executar o comando <command>emerge sync</command>
    antes de mais nada. Dessa forma, você estará usando as versões estáveis
    mais recentes, tanto do Apache quanto do PHP.
   </simpara>
   <simpara>
    Agora que tudo está no seu lugar, você pode usar o exemplo a seguir
    para instalar o Apache e o PHP:
   </simpara>
   <example id="install.unix.gentoo.portage.example">
    <title>Exemplo de Instalação com o Apache 1.3 no Gentoo</title>
    <programlisting role="shell">
<![CDATA[
# emerge \<apache-2
# USE="-*" emerge php mod_php
# ebuild /var/db/pkg/dev-php/mod_php-<your PHP version>/mod_php-<your PHP version>.ebuild config
# nano /etc/conf.d/apache
  Add "-D PHP4" to APACHE_OPTS
  
# rc-update add apache default
# /etc/init.d/apache start
]]>
    </programlisting>
   </example>
   <simpara>
    Você pode ler mais sobre o emerge no
    <ulink url="&url.gentoo.portage;">Manual do Portage</ulink> que é excelente e está disponível
    no website do Gentoo.
   </simpara>
   <simpara>
    Se você precisa usar o Apache 2, você pode simplesmente usar <command>emerge apache</command>
    no último exemplo.
   </simpara>
 </sect2>
 <sect2 id="install.unix.gentoo.config">
  <title>Controle apurado na configuração</title>
   <simpara>
    Na seção anterior, o PHP foi emerged sem nenhum módulo.
    Até essa edição, o único módulo ativado por padrão com o Portage
    é o XML que é necessário para usar o <ulink url="&url.php.pear;">PEAR</ulink>.
    Isso pode não ser o que você quer e você perceberá que precisa
    de outros módulos, como MySQL, gettext, GD, etc.
   </simpara>
   <simpara>
    Quando você compila o PHP a partir dos fontes, você precisa ativar os módulos 
    pelo comando <command>configure</command>. Com o Gentoo, você pode simplesmente
    prover essas opções na variável de ambiente USE que será passada para o script configure automaticamente.
    Para ver quais opções usar em USE com o emerge, você pode tentar:
   </simpara>
   <example id="install.unix.gentoo.config.example">
    <title>Vendo a lista de opções validas para a variável USE</title>
    <programlisting role="shell">
<![CDATA[
# USE="-*" emerge -pv php

[ebuild  N    ] dev-php/php-4.3.6-r1  -X -berkdb -crypt -curl -debug -doc 
-fdftk -firebird -flash -freetds -gd -gd-external -gdbm -gmp -hardenedphp 
-imap -informix -ipv6 -java -jpeg -kerberos -ldap -mcal -memlimit -mssql 
-mysql -ncurses -nls -oci8 -odbc -pam -pdflib -png -postgres -qt -readline 
-snmp -spell -ssl -tiff -truetype -xml2 -yaz  3,876 kB
]]>
    </programlisting>
   </example>
   <simpara>
    Como você pode ver do exemplo acima, o PHP considera várias opções para a variável USE.
    Preste bastante atenção nelas e escolha quais você precisa. Se você escolher uma opção e
    você não tiver as bibliotecas corretas, o Portage irá compilar elas para você.
    É uma boa idéia usar o comando <command>emerge -pv</command> novamente para ver o que
    o Portage irá compila de acordo com as opçõe que você colocar na variável USE. Como um exemplo,
    se você não tiver X instalado e escolher incluir X nas opções de USE,
    o Portage irá compilar X antes do PHP, o que pode levar algumas
    horas.
   </simpara>
   <simpara>
    Se você escolher compilar o PHP com suporte à MySQL, cURL e GD, o comando
    se parecerá com algo assim:
   </simpara>  
   <example id="install.unix.gentoo.config.example2">
    <title>Instalando o PHP usando opções na variável USE</title>
    <programlisting role="shell">
<![CDATA[
# USE="-* curl mysql gd" emerge php mod_php
]]>
    </programlisting>
   </example>
   <simpara>
    Como no exemplo anterior, não esqueca de incluir mod_php no comando.
    php é responsável para a versão de linha de comando do PHP e mod_php é
    para a versão de módulo do Apache do mesmo.
   </simpara>
 </sect2>
 <sect2 id="install.unix.gentoo.faq">
  <title>Problemas Comuns</title>
  <itemizedlist>
   <listitem>
    <simpara>
     Se você ver o fonte do PHP ao invés do resultado que o script deveria
     produzir, você provavelmente esqueceu de editar o arquivo <filename>/etc/conf.d/apache</filename>.
     O Apache precisa ser iniciado com a opção -D PHP4. Para ver se a opção está
     presente, você deve ser capaz de verificar usando o comando
     <command>ps ax | grep apache</command> enquanto o Apache estiver rodando.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Outro problema que pode ocorrer é de você acabar com mais de uma versão
     do PHP instalado no seu sistema. Nesse caso, você deve unmerge
     as versões mais velhas manualmente usando
     <command>emerge unmerge mod_php-&lt;versão velha&gt;</command>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se você não pode fazer o emerge do PHP por causa de Java, tente colocar <command>-*</command>
     como primeira opção na variável USE, como nos exemplos acima.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se você estiver tendo problemas de configurando o Apache e o PHP, você sempre pode
     procurar os <ulink url="&url.gentoo.forums;">Fóruns do Gentoo</ulink>.
     Tente procurar pelas palavras-chave "Apache PHP".
    </simpara>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
